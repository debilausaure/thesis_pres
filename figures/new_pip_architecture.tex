\begin{tikzpicture}[>=triangle 45,font=\sffamily, every text node part/.style={align=center}, scale=0.7, every node/.style={transform shape}] {

	\onslide<1> {
		\node[draw, pattern=south west lines, minimum width=5cm, minimum height = 4cm] (models) at (0, -3.1) {};
		\node[below=0cm of models] {Interface agnostique\\des modèles};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm] (services) at (0, 0.2) {Code des services\\(Foncteur de modèles)};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (functions_interface) at (0, -1.9) {Interface des fonctions};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (types_interface) at (0, -2.7) {Interface des types};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (state_monad) at (0, -3.5) {Monade d'état générique};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (state_interface) at (0, -4.3) {Interface de l'état};

		\node[draw, pattern=south west lines, minimum width=5cm, minimum height = 4cm] (models) at (-7, -3.1) {};
		\node[below=0cm of models] {Modèles d'isolation};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm] (proofs) at (-7, 2.4) {Fonctions ``fictives''\\Triplets de Hoare\\Scripts de preuve};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm, dotted, semithick] (spec_code) at (-7, 0.2) {Code des services\\(Instancié sur les modèles)};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (functions_model) at (-7, -1.9) {Modèles de fonctions};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (types_model) at (-7, -2.7) {Modèles de types};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm, dotted, semithick] (derived_monad) at (-7, -3.5) {Monade spécifique};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (state_model) at (-7, -4.3) {Modèle de l'état};

		\node[draw, pattern=south west lines, minimum width=5cm, minimum height = 2.4cm] (impl) at (7, -2.3) {};
		\node[below=0cm of impl] {Implémentation exécutable};
		\node[draw, fill=white, minimum width=4cm, minimum height=2cm, dotted, semithick] (Cservices) at (7,0.2) {Code des services\\(Compilé en C)};
		\node[draw, fill=white, minimum width=4cm, minimum height = 0.7cm] (functions) at (7, -1.9) {Fonctions sur l'état};
		\node[draw, fill=white, minimum width=4cm, minimum height = 0.7cm] (types) at (7, -2.7) {Types};

		\draw[->] (services) -- (Cservices);
		\draw[->] (services) -- (spec_code);
		\draw[->, dashed] (functions_model) to (functions_interface) ;
		\draw[<-] (derived_monad) to (state_monad) ;
		\draw[->, dashed] (types_model) to (types_interface) ;
		\draw[->, dashed] (state_model) to (state_interface) ;
		\draw[->, dashed] (types) to (types_interface) ;
		\draw[->, dashed] (functions) to (functions_interface) ;
	}
	\onslide<2> {
		\node[draw, pattern=south west lines, minimum width=5cm, minimum height = 4cm] (models) at (0, -3.1) {};
		\node[below=0cm of models] {Interface agnostique\\des modèles};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm] (generic_proofs) at (0, 2.4) {Scripts \emph{génériques}\\Triplets \emph{génériques}};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm] (services) at (0, 0.2) {Code des services\\(Foncteur de modèles)};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (functions_interface) at (0, -1.9) {Interface des fonctions};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (types_interface) at (0, -2.7) {Interface des types};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (state_monad) at (0, -3.5) {Monade d'état générique};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (state_interface) at (0, -4.3) {Interface de l'état};

		\node[draw, pattern=south west lines, minimum width=5cm, minimum height = 4cm] (models) at (-7, -3.1) {};
		\node[below=0cm of models] {Modèles d'isolation};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm] (proofs) at (-7, 2.4) {Invariants \emph{spécifiques}\\aux modèles};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 2cm, dotted, semithick] (spec_code) at (-7, 0.2) {Code des services\\(Instancié sur les modèles)};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (functions_model) at (-7, -1.9) {Modèles de fonctions};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (types_model) at (-7, -2.7) {Modèles de types};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm, dotted, semithick] (derived_monad) at (-7, -3.5) {Monade spécifique};
		\node[draw, fill=white, minimum width = 4cm, minimum height = 0.7cm] (state_model) at (-7, -4.3) {Modèle de l'état};

		\node[draw, pattern=south west lines, minimum width=5cm, minimum height = 2.4cm] (impl) at (7, -2.3) {};
		\node[below=0cm of impl] {Implémentation exécutable};
		\node[draw, fill=white, minimum width=4cm, minimum height=2cm, dotted, semithick] (Cservices) at (7,0.2) {Code des services\\(Compilé en C)};
		\node[draw, fill=white, minimum width=4cm, minimum height = 0.7cm] (functions) at (7, -1.9) {Fonctions sur l'état};
		\node[draw, fill=white, minimum width=4cm, minimum height = 0.7cm] (types) at (7, -2.7) {Types};

		\draw[->] (services) -- (Cservices);
		\draw[->] (services) -- (spec_code);
		\draw[->, dashed] (functions_model) to (functions_interface) ;
		\draw[<-] (derived_monad) to (state_monad) ;
		\draw[->, dashed] (types_model) to (types_interface) ;
		\draw[->, dashed] (state_model) to (state_interface) ;
		\draw[->, dashed] (types) to (types_interface) ;
		\draw[->, dashed] (functions) to (functions_interface) ;
	}
}

\end{tikzpicture}
