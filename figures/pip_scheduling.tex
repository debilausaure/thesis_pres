\begin{tikzpicture}[>=triangle 45,font=\sffamily, every text node part/.style={align=center}, scale=0.6, every node/.style={transform shape}]
	\definecolor{bluecolor}{RGB}{138, 138, 255}
	\definecolor{pinkcolor}{RGB}{255, 138, 138}
	\onslide<1> {
		\node[draw, thick, minimum width=4cm, minimum height=2cm] (pip) at (0, -3) {Pip};

		\draw[dashed] (-10.5, -1.5) -- (7, -1.5);
		\node at (-9, -1) {Espace utilisateur};	
		\node at (-9, -2) {Espace privilégié};	

		\node[opacity=0.3, draw, minimum width=4cm, minimum height=2cm] (root) at (0, 0) {Ordonnanceur};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child1) at (-5, 3) {Linux};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child2) at (5, 3) {FreeRTOS};
	
		\node[draw, thick, minimum width=4cm, minimum height=2cm] (gchild) at (-5, 6) {Shell};
	
		\draw[opacity=0.3, semithick] (root) -- (child1);
		\draw[opacity=0.3, semithick] (root) -- (child2);
		\draw[opacity=0.3, semithick] (child1) -- (gchild);

		\node[left=of gchild] {La partition s'exécute};
	}

	\onslide<2> {
	\node[draw, thick, minimum width=4cm, minimum height=2cm] (pip) at (0, -3) {Pip};

	\draw[dashed] (-10.5, -1.5) -- (7, -1.5);
	\node at (-9, -1) {Espace utilisateur};	
	\node at (-9, -2) {Espace privilégié};	

		\node[draw, thick, fill=bluecolor, minimum width=4cm, minimum height=2cm] (root) at (0, 0) {};
		\node[draw, thick, fill=white, minimum width=3.6cm, minimum height=2cm] at (root) {Ordonnanceur};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child1) at (-5, 3) {Linux};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child2) at (5, 3) {FreeRTOS};
	
		\node[draw, thick, fill=pinkcolor, minimum width=4cm, minimum height=2cm] (gchild) at (-5, 6) {};
		\node[draw, thick, fill=white, minimum width=3.6cm, minimum height=2cm] at (gchild) {Shell};
	
		\draw[opacity=0.3, semithick] (root) -- (child1);
		\draw[opacity=0.3, semithick] (root) -- (child2);
		\draw[opacity=0.3, semithick] (child1) -- (gchild);

		\node[left=of gchild] {Une interruption de l'alarme survient\\pendant l'exécution de la partition};
		\draw[<-] (root.north) to [out=90 , in=320] (gchild.east);
		\node[right=of gchild] {L'interruption déclenche un\\transfert vers l'ordonnanceur};
		
	}

	\onslide<3> {
	\node[draw, thick, minimum width=4cm, minimum height=2cm] (pip) at (0, -3) {Pip};

	\draw[dashed] (-10.5, -1.5) -- (7, -1.5);
	\node at (-9, -1) {Espace utilisateur};	
	\node at (-9, -2) {Espace privilégié};	

		\node[draw, thick, minimum width=4cm, minimum height=2cm] (root) at (0, 0) {Ordonnanceur};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child1) at (-5, 3) {Linux};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child2) at (5, 3) {FreeRTOS};
	
		\node[opacity=0.3, draw, minimum width=4cm, minimum height=2cm] (gchild) at (-5, 6) {Shell};
	
		\draw[opacity=0.3, semithick] (root) -- (child1);
		\draw[opacity=0.3, semithick] (root) -- (child2);
		\draw[opacity=0.3, semithick] (child1) -- (gchild);

		\node[left=of root] {L'ordonnanceur décide selon sa politique\\de transférer le flot d'exécution};
	}

	\onslide<4> {
	\node[draw, thick, minimum width=4cm, minimum height=2cm] (pip) at (0, -3) {Pip};

	\draw[dashed] (-10.5, -1.5) -- (7, -1.5);
	\node at (-9, -1) {Espace utilisateur};	
	\node at (-9, -2) {Espace privilégié};	

		\node[draw, thick, fill=pinkcolor, minimum width=4cm, minimum height=2cm] (root) at (0, 0) {};
		\node[draw, thick, fill=white, minimum width=3.6cm, minimum height=2cm] at (root) {Ordonnanceur};
		\node[opacity=0.3, draw, thick, minimum width=4cm, minimum height=2cm] (child1) at (-5, 3) {Linux};
		\node[draw, thick, fill=bluecolor, minimum width=4cm, minimum height=2cm] (child2) at (5, 3) {};
		\node[draw, thick, fill=white, minimum width=3.6cm, minimum height=2cm] at (child2) {FreeRTOS};
	
		\node[opacity=0.3, draw, minimum width=4cm, minimum height=2cm] (gchild) at (-5, 6) {Shell};
	
		\draw[opacity=0.3, semithick] (root) -- (child1);
		\draw[->, thick] (root) -- (child2);
		\draw[opacity=0.3, semithick] (child1) -- (gchild);
	}


\end{tikzpicture}
